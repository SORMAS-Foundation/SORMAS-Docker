version: '2.3'

services:
  sormas:
    extends:
      file: services-base.yml
      service: base-sormas
    environment:
      - NAMESIMILARITYTHRESHOLD=${NAMESIMILARITYTHRESHOLD}
    volumes:
      - ${SORMAS_PATH}/documents:/opt/sormas/documents
      - ${SORMAS_PATH}/custom:/opt/sormas/custom
      - ${SORMAS_PATH}/sormas-logs:/opt/domains/sormas/logs
    cpus: ${APPSERVER_CPUS}

  apache2:
    extends:
      file: services-base.yml
      service: base-apache2
    links:
      - sormas
    depends_on:
      - sormas
